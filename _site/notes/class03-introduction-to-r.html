<!DOCTYPE html>
<html>
  <head>
    <title>Taylor Arnold - STAT 209</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="R Basics

" />
    <meta property="og:description" content="R Basics

" />
    
    <meta name="author" content="Taylor Arnold" />

    
    <meta property="og:title" content="Introduction to R" />
    <meta property="twitter:title" content="Introduction to R" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/stat209/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Taylor Arnold - Assistant Professor of Statistics, University of Richmond" href="/stat209/feed.xml" />
    <link rel="apple-touch-icon" sizes="57x57" href="/stat209/assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/stat209/assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/stat209/assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/stat209/assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/stat209/assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/stat209/assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/stat209/assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/stat209/assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/stat209/assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/stat209/assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/stat209/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/stat209/assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/stat209/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/stat209/assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/stat209/" class="site-avatar"><img src="https://avatars3.githubusercontent.com/u/5752184?v=3&s=460" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="https://statsmaths.github.io/">Taylor Arnold</a></h1>
            <p class="site-description">Assistant Professor of Statistics, University of Richmond</p>
          </div>

          <nav>
            <a href="https://statsmaths.github.io/courses/">Courses</a>
            <a href="https://statsmaths.github.io/blog/">Blog</a>
            <a href="https://statsmaths.github.io/research/">Research</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="page">

  <h1>Introduction to R</h1>

  <div class="entry">
    <h2 id="r-basics">R Basics</h2>

<p>Today we begin our study of using the R programming language to analyze
data. There are two basic philosophies regarding how to teach R: (1) working
from the ground up, methodically going through each function and command one
by one or (2) learning by immersion, starting with short by complete examples
and working backwards to fill in the gaps.</p>

<p>We will start by the immersion method because it is both more interesting
and generally leads to a better understanding of how to do statistical
computing. Throughout the semester we will go back and fill in any remaining
details as needed.</p>

<h3 id="rstudio">RStudio</h3>

<p>Now, open the RStudio file on the lab computers. Make sure you are opening
RStudio and not R itself. You should see screen like this (its a screen
shot from my Mac, but looks very similar on Windows):</p>

<p><img src="../assets/img/r-interface-2016.png" alt="" /></p>

<p>The window on the left hand side is called the <strong>console</strong>. It is the brains
of R. This is where code is actually R by the R engine. Just to get a sense
of how this works, start by writing a simple math equation:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">4</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] 6</code></pre></figure>

<p>You should see the result (6) print out on the screen in the console.</p>

<h3 id="code-files">Code files</h3>

<p>We can type commands directly into the console but this is generally not
very good practice. A better option is to write code into an Rscript.
This script can then be (1) saved as a file and (2) run automatically
line by line in R. To create a new script click the green plus button in the
upper left-hand corner of RStudio. You should create a new <code class="highlighter-rouge">.R</code> file and then
will see something like this:</p>

<p><img src="../assets/img/intro-rstudio.png" alt="" /></p>

<p>Try typing the algebraic expression into the code file:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">4</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] 6</code></pre></figure>

<p>To run these lines, highlight them all and hit the run button on the top of
the editor. This automatically runs the command in the console and prints out
the results.</p>

<p>With R, we save scripts rather than the actual variables and analyses. Save
the <code class="highlighter-rouge">.R</code>. file somewhere on the Desktop to see how to save it. Close RStudio
and then re-open the code.</p>

<h3 id="packages">Packages</h3>

<p>In addition to the basic R functions that exist for our use on start-up,
there are thousands of user-contributed packages the implement various
add-on functions. Several are already installed on the machines in class.
Instructions for downloaded packages on your own machine are included in
the setup notes.</p>

<p>Once a package is installed, we also need to load it. While installing the
package only needs to be done once, we have to load it each and every time
we restart R. To load the <strong>readr</strong> package, for instance, we would run
the following:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span></code></pre></figure>

<p>Once loaded, we can run commands from the readr package.</p>

<h2 id="a-short-example">A short example</h2>

<h3 id="load-packages">Load packages</h3>

<p>Now, let’s actually use some R commands to perform a statistical analysis.
Make sure that you are copying these command <em>first</em> into a code file and
then running them. The initial step is to load four R packages:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span></code></pre></figure>

<p>Put these at the top of the script and then leave a blank line before
copying the rest of the code. Run the commands and verify that there are
no errors (R may show messages or warnings; these are generally nothing
to worry about).</p>

<h3 id="import-and-view-the-data">Import and view the data</h3>

<p>The next step is to load a dataset into R. Thursday’s class will be spent
talking about how to structure our own data; for today, we will work with some
data that I have previously prepared:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">births</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://statsmaths.github.io/stat_data/arbuthnot.csv"</span><span class="p">)</span></code></pre></figure>

<p>Here, we are using the <strong>function</strong> <code class="highlighter-rouge">read_csv</code> to read in a dataset on my
website. The <code class="highlighter-rouge">&lt;-</code> symbol has saved this dataset as an <strong>object</strong> called
<code class="highlighter-rouge">births</code>. Notice that the dataset appears in the environment pane in the upper
right-hand corner of RStudio.</p>

<p>The dataset here shows the number of children born in London on an annual
basis, separated by their sex. Interactively in RStudio, you can see the data
as a table by clicking on the table in the upper right-hand corner.</p>

<p><em>Q: What years are included in the study?</em></p>

<p><em>Q: Where/how do you think this data may have been collected?</em></p>

<h3 id="plots">Plots</h3>

<p>Now, let’s visualize the dataset by constructing several different plots. To
start, here is the code to produce a plot of the total number of births by
year:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">births</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">()</span></code></pre></figure>

<p><img src="../assets/class03-introduction-to-r/unnamed-chunk-7-1.png" title="plot of chunk unnamed-chunk-7" alt="plot of chunk unnamed-chunk-7" width="100%" /></p>

<p><em>Q: How would you describe the pattern on births over time?</em></p>

<p>It may be helpful to add the head of state for each year of the dataset.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">births</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">head_of_state</span><span class="p">))</span></code></pre></figure>

<p><img src="../assets/class03-introduction-to-r/unnamed-chunk-8-1.png" title="plot of chunk unnamed-chunk-8" alt="plot of chunk unnamed-chunk-8" width="100%" /></p>

<p><em>Q: What benefit does the color give to understanding the data?</em></p>

<p><em>Q: What is one change you’d like to make to the way R has constructed the
plot?</em></p>

<h3 id="numeric-summaries">Numeric summaries</h3>

<p>This dataset was originally designed for studying the secondary sex ratio:
the number of males born in a population divided by the number of females.
We can compute this ratio for the entire run of the dataset in R with the
following:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="nf">sum</span><span class="p">(</span><span class="n">births</span><span class="o">$</span><span class="n">boys</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">births</span><span class="o">$</span><span class="n">girls</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] 1.067294</code></pre></figure>

<p>We see that there are slightly more males born over the time period (about
7% more) compared to women.</p>

<h3 id="assignment">Assignment</h3>

<p>Now that you have seen a short example of using R to read in a dataset and
produce a short analysis, try to see how well you understand the code by
making a few modifications. Along the way, try to understand how these changes
effect the results. I recommend adding to the code you already have rather
than replacing it:</p>

<ol>
  <li>I have another dataset on my website called <code class="highlighter-rouge">present.csv</code> that gives
a present-day version of Arbuthnot dataset for the United States. Read this
into R and save as a dataset called <code class="highlighter-rouge">present</code>. <em>Q: What years are covered
here?</em></li>
  <li>Recreate the line chart colored by the head of state for the present day
data. <em>Q: How would you describe the pattern?</em></li>
  <li>Now, plot just the number of girls born each year rather than the total.
<em>Q: Does the pattern differ significantly from the total births?</em></li>
  <li>Compute the secondary sex ratio for the US dataset. <em>Q: How does it
compare to the Arbuthnot data?</em></li>
  <li>Calculate the average number of birth each year in the present-day dataset
(Hint: there is a function called <code class="highlighter-rouge">mean</code> in R similar to the function <code class="highlighter-rouge">sum</code>).</li>
</ol>

<p>Looks like you are already well on your way to learning how to do statistical
analyses in R!</p>

<p>I have also posted notes on the website, called <strong>Class 00</strong>, for installing
R, RStudio and all of the required packages on your own machine. If you plan
on using your own computer in this course, which I highly recommend (you’ll
need to write all of the projects using RStudio), please follow this
instructions before the next class. I do not want to be debugging R
installations on the eve of the first project’s due date.</p>


  </div>
</article>

    </div>
  </body>

  <footer>
  </footer>
</html>
